{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\nexport function calculateNextDueDate(\n  currentDate: Date, \n  periodValue: number, \n  periodType: 'd√≠as' | 'meses'\n): Date {\n  const nextDate = new Date(currentDate);\n  \n  if (periodType === 'd√≠as') {\n    nextDate.setDate(nextDate.getDate() + periodValue);\n  } else if (periodType === 'meses') {\n    nextDate.setMonth(nextDate.getMonth() + periodValue);\n  }\n  \n  return nextDate;\n}\n\nexport function formatDate(dateString: string): string {\n  try {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('es-ES', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  } catch (error) {\n    console.error('Error formatting date:', error);\n    return 'Fecha inv√°lida';\n  }\n}\n\nexport function isOverdue(nextDueDate: string): boolean {\n  const today = new Date();\n  const dueDate = new Date(nextDueDate);\n  \n  // Set both dates to start of day for accurate comparison\n  today.setHours(0, 0, 0, 0);\n  dueDate.setHours(0, 0, 0, 0);\n  \n  return dueDate.getTime() <= today.getTime();\n}\n\nexport function calculateUpdatedAmount(currentAmount: number, percentage: number): number {\n  return currentAmount + (currentAmount * percentage / 100);\n}\n\nexport function formatCurrency(amount: number): string {\n  return new Intl.NumberFormat('es-AR', {\n    style: 'currency',\n    currency: 'ARS',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 2\n  }).format(amount);\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,wIAAA,CAAA,OAAI,AAAD,EAAE;AACtB;AAEO,SAAS,qBACd,WAAiB,EACjB,WAAmB,EACnB,UAA4B;IAE5B,MAAM,WAAW,IAAI,KAAK;IAE1B,IAAI,eAAe,QAAQ;QACzB,SAAS,OAAO,CAAC,SAAS,OAAO,KAAK;IACxC,OAAO,IAAI,eAAe,SAAS;QACjC,SAAS,QAAQ,CAAC,SAAS,QAAQ,KAAK;IAC1C;IAEA,OAAO;AACT;AAEO,SAAS,WAAW,UAAkB;IAC3C,IAAI;QACF,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,kBAAkB,CAAC,SAAS;YACtC,MAAM;YACN,OAAO;YACP,KAAK;QACP;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO;IACT;AACF;AAEO,SAAS,UAAU,WAAmB;IAC3C,MAAM,QAAQ,IAAI;IAClB,MAAM,UAAU,IAAI,KAAK;IAEzB,yDAAyD;IACzD,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;IACxB,QAAQ,QAAQ,CAAC,GAAG,GAAG,GAAG;IAE1B,OAAO,QAAQ,OAAO,MAAM,MAAM,OAAO;AAC3C;AAEO,SAAS,uBAAuB,aAAqB,EAAE,UAAkB;IAC9E,OAAO,gBAAiB,gBAAgB,aAAa;AACvD;AAEO,SAAS,eAAe,MAAc;IAC3C,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ","debugId":null}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/RentalForm.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { calculateNextDueDate } from '../lib/utils';\nimport { Rental } from '../app/page';\n\ninterface RentalFormProps {\n  onClose: () => void;\n  onSave: (rental: Omit<Rental, 'id' | 'createdAt'>) => void;\n}\n\nexport default function RentalForm({ onClose, onSave }: RentalFormProps) {\n  const [nombre, setNombre] = useState('');\n  const [monto, setMonto] = useState<string>('');\n  const [detalles, setDetalles] = useState('');\n  const [periodValue, setPeriodValue] = useState<string>('');\n  const [periodType, setPeriodType] = useState<'d√≠as' | 'meses'>('d√≠as');\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Validate fields\n    if (!nombre.trim()) {\n      setError('El nombre es obligatorio');\n      return;\n    }\n    \n    if (!monto || isNaN(Number(monto)) || Number(monto) <= 0) {\n      setError('El monto debe ser un n√∫mero v√°lido mayor a 0');\n      return;\n    }\n    \n    if (!periodValue || isNaN(Number(periodValue)) || Number(periodValue) <= 0) {\n      setError('La periodicidad debe ser un n√∫mero v√°lido mayor a 0');\n      return;\n    }\n    \n    setError(null);\n\n    const now = new Date();\n    const nextDueDate = calculateNextDueDate(now, Number(periodValue), periodType);\n    \n    const newRental: Omit<Rental, 'id' | 'createdAt'> = {\n      nombre: nombre.trim(),\n      monto: Number(monto),\n      detalles: detalles.trim(),\n      periodValue: Number(periodValue),\n      periodType,\n      nextDueDate: nextDueDate.toISOString()\n    };\n\n    onSave(newRental);\n  };\n\n  const handleOverlayClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return (\n    <div \n      className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4\"\n      onClick={handleOverlayClick}\n    >\n      <div className=\"bg-white p-6 rounded-lg shadow-lg w-full max-w-md max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-bold text-black\">Nuevo Alquiler</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 text-2xl font-bold\"\n            aria-label=\"Cerrar\"\n          >\n            √ó\n          </button>\n        </div>\n        \n        {error && (\n          <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded\">\n            {error}\n          </div>\n        )}\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Nombre *\n            </label>\n            <input\n              type=\"text\"\n              value={nombre}\n              onChange={(e) => setNombre(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-black\"\n              placeholder=\"Ej: Departamento Centro\"\n              required\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Monto Inicial *\n            </label>\n            <input\n              type=\"number\"\n              value={monto}\n              onChange={(e) => setMonto(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-black\"\n              placeholder=\"Ej: 50000\"\n              min=\"0\"\n              step=\"0.01\"\n              required\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Detalles\n            </label>\n            <textarea\n              value={detalles}\n              onChange={(e) => setDetalles(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-black\"\n              placeholder=\"Informaci√≥n adicional...\"\n              rows={3}\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Periodicidad de Actualizaci√≥n *\n            </label>\n            <div className=\"flex space-x-2\">\n              <input\n                type=\"number\"\n                value={periodValue}\n                onChange={(e) => setPeriodValue(e.target.value)}\n                className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-black\"\n                placeholder=\"Ej: 3\"\n                min=\"1\"\n                required\n              />\n              <select\n                value={periodType}\n                onChange={(e) => setPeriodType(e.target.value as 'd√≠as' | 'meses')}\n                className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-black\"\n              >\n                <option value=\"d√≠as\">d√≠as</option>\n                <option value=\"meses\">meses</option>\n              </select>\n            </div>\n            <p className=\"text-xs text-gray-500 mt-1\">\n              Ejemplo: cada {periodValue || 'X'} {periodType}\n            </p>\n          </div>\n          \n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <button \n              type=\"button\" \n              onClick={onClose}\n              className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\"\n            >\n              Cancelar\n            </button>\n            <button \n              type=\"submit\"\n              className=\"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition-colors\"\n            >\n              Guardar\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/lib/notifications.ts"],"sourcesContent":["import { Rental } from '../app/page';\n\nexport async function requestNotificationPermission(): Promise<boolean> {\n  try {\n    if (!('Notification' in window)) {\n      alert('Este navegador no soporta notificaciones. Para recibir recordatorios de vencimientos, usa Safari en iOS.');\n      return false;\n    }\n\n    if (Notification.permission === 'granted') {\n      return true;\n    }\n\n    if (Notification.permission === 'denied') {\n      alert('Las notificaciones est√°n bloqueadas. Ve a Configuraci√≥n > Safari > Notificaciones para habilitarlas.');\n      return false;\n    }\n\n    // Show explanation before requesting permission\n    const userWantsNotifications = confirm(\n      '¬øQuieres recibir notificaciones cuando venzan tus alquileres?\\n\\n' +\n      'Esto es importante para recordarte actualizar los montos a tiempo.'\n    );\n\n    if (!userWantsNotifications) {\n      return false;\n    }\n\n    const permission = await Notification.requestPermission();\n    \n    if (permission === 'granted') {\n      // Show a test notification to confirm it works\n      new Notification('¬°Notificaciones activadas!', {\n        body: 'Ahora recibir√°s recordatorios cuando venzan tus alquileres.',\n        icon: '/icon-192.png',\n        tag: 'welcome-notification'\n      });\n      return true;\n    } else {\n      alert('Sin notificaciones no podr√°s recibir recordatorios de vencimientos. Puedes activarlas m√°s tarde en la configuraci√≥n del navegador.');\n      return false;\n    }\n  } catch (error) {\n    console.error('Error requesting notification permission:', error);\n    alert('Error al solicitar permisos de notificaci√≥n. Intenta recargar la p√°gina.');\n    return false;\n  }\n}\n\nexport function checkNotificationPermission(): string {\n  if (!('Notification' in window)) {\n    return 'not-supported';\n  }\n  return Notification.permission;\n}\n\nexport function scheduleNotification(rental: Rental): void {\n  try {\n    const dueDate = new Date(rental.nextDueDate);\n    const now = new Date();\n    const timeUntilDue = dueDate.getTime() - now.getTime();\n\n    // If the rental is due today or overdue, show notification immediately\n    if (timeUntilDue <= 0) {\n      showNotification(rental);\n      return;\n    }\n\n    // Schedule notification for the due date\n    setTimeout(() => {\n      showNotification(rental);\n    }, timeUntilDue);\n\n  } catch (error) {\n    console.error('Error scheduling notification:', error);\n  }\n}\n\nexport function showNotification(rental: Rental): void {\n  try {\n    if (Notification.permission === 'granted') {\n      new Notification(`Hoy vence el alquiler de ${rental.nombre}. Actualizalo.`, {\n        body: `Monto: $${rental.monto} - ${rental.detalles}`,\n        icon: '/icon-192.png',\n        tag: `rental-${rental.id}`,\n        requireInteraction: true,\n      });\n    }\n  } catch (error) {\n    console.error('Error showing notification:', error);\n  }\n}\n\nexport function checkOverdueRentals(rentals: Rental[]): void {\n  if (Notification.permission !== 'granted') {\n    return;\n  }\n\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n\n  rentals.forEach(rental => {\n    const dueDate = new Date(rental.nextDueDate);\n    dueDate.setHours(0, 0, 0, 0);\n\n    // Check if rental is due today\n    if (dueDate.getTime() === today.getTime()) {\n      showNotification(rental);\n    }\n  });\n}\n\nexport function getDaysUntilDue(rental: Rental): number {\n  const today = new Date();\n  const dueDate = new Date(rental.nextDueDate);\n  \n  today.setHours(0, 0, 0, 0);\n  dueDate.setHours(0, 0, 0, 0);\n  \n  const diffTime = dueDate.getTime() - today.getTime();\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  \n  return diffDays;\n}\n"],"names":[],"mappings":";;;;;;;;AAEO,eAAe;IACpB,IAAI;QACF,IAAI,CAAC,CAAC,kBAAkB,MAAM,GAAG;YAC/B,MAAM;YACN,OAAO;QACT;QAEA,IAAI,aAAa,UAAU,KAAK,WAAW;YACzC,OAAO;QACT;QAEA,IAAI,aAAa,UAAU,KAAK,UAAU;YACxC,MAAM;YACN,OAAO;QACT;QAEA,gDAAgD;QAChD,MAAM,yBAAyB,QAC7B,sEACA;QAGF,IAAI,CAAC,wBAAwB;YAC3B,OAAO;QACT;QAEA,MAAM,aAAa,MAAM,aAAa,iBAAiB;QAEvD,IAAI,eAAe,WAAW;YAC5B,+CAA+C;YAC/C,IAAI,aAAa,8BAA8B;gBAC7C,MAAM;gBACN,MAAM;gBACN,KAAK;YACP;YACA,OAAO;QACT,OAAO;YACL,MAAM;YACN,OAAO;QACT;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6CAA6C;QAC3D,MAAM;QACN,OAAO;IACT;AACF;AAEO,SAAS;IACd,IAAI,CAAC,CAAC,kBAAkB,MAAM,GAAG;QAC/B,OAAO;IACT;IACA,OAAO,aAAa,UAAU;AAChC;AAEO,SAAS,qBAAqB,MAAc;IACjD,IAAI;QACF,MAAM,UAAU,IAAI,KAAK,OAAO,WAAW;QAC3C,MAAM,MAAM,IAAI;QAChB,MAAM,eAAe,QAAQ,OAAO,KAAK,IAAI,OAAO;QAEpD,uEAAuE;QACvE,IAAI,gBAAgB,GAAG;YACrB,iBAAiB;YACjB;QACF;QAEA,yCAAyC;QACzC,WAAW;YACT,iBAAiB;QACnB,GAAG;IAEL,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;IAClD;AACF;AAEO,SAAS,iBAAiB,MAAc;IAC7C,IAAI;QACF,IAAI,aAAa,UAAU,KAAK,WAAW;YACzC,IAAI,aAAa,CAAC,yBAAyB,EAAE,OAAO,MAAM,CAAC,cAAc,CAAC,EAAE;gBAC1E,MAAM,CAAC,QAAQ,EAAE,OAAO,KAAK,CAAC,GAAG,EAAE,OAAO,QAAQ,EAAE;gBACpD,MAAM;gBACN,KAAK,CAAC,OAAO,EAAE,OAAO,EAAE,EAAE;gBAC1B,oBAAoB;YACtB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;IAC/C;AACF;AAEO,SAAS,oBAAoB,OAAiB;IACnD,IAAI,aAAa,UAAU,KAAK,WAAW;QACzC;IACF;IAEA,MAAM,QAAQ,IAAI;IAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;IAExB,QAAQ,OAAO,CAAC,CAAA;QACd,MAAM,UAAU,IAAI,KAAK,OAAO,WAAW;QAC3C,QAAQ,QAAQ,CAAC,GAAG,GAAG,GAAG;QAE1B,+BAA+B;QAC/B,IAAI,QAAQ,OAAO,OAAO,MAAM,OAAO,IAAI;YACzC,iBAAiB;QACnB;IACF;AACF;AAEO,SAAS,gBAAgB,MAAc;IAC5C,MAAM,QAAQ,IAAI;IAClB,MAAM,UAAU,IAAI,KAAK,OAAO,WAAW;IAE3C,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;IACxB,QAAQ,QAAQ,CAAC,GAAG,GAAG,GAAG;IAE1B,MAAM,WAAW,QAAQ,OAAO,KAAK,MAAM,OAAO;IAClD,MAAM,WAAW,KAAK,IAAI,CAAC,WAAW,CAAC,OAAO,KAAK,KAAK,EAAE;IAE1D,OAAO;AACT","debugId":null}},
    {"offset": {"line": 507, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/RentalUpdateModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Rental } from '../app/page';\nimport { calculateNextDueDate, calculateUpdatedAmount, formatCurrency } from '../lib/utils';\n\ninterface RentalUpdateModalProps {\n  rental: Rental;\n  onClose: () => void;\n  onUpdate: (updatedRental: Rental) => void;\n}\n\nexport default function RentalUpdateModal({ rental, onClose, onUpdate }: RentalUpdateModalProps) {\n  const [percentage, setPercentage] = useState<string>('');\n  const [error, setError] = useState<string | null>(null);\n  const [step, setStep] = useState<'input' | 'confirm'>('input');\n  const [newAmount, setNewAmount] = useState<number>(0);\n\n  const handleCalculate = () => {\n    if (!percentage || isNaN(Number(percentage))) {\n      setError('Ingresa un porcentaje v√°lido');\n      return;\n    }\n\n    const percentageNum = Number(percentage);\n    if (percentageNum < 0) {\n      setError('El porcentaje no puede ser negativo');\n      return;\n    }\n\n    setError(null);\n    const calculatedAmount = calculateUpdatedAmount(rental.monto, percentageNum);\n    setNewAmount(calculatedAmount);\n    setStep('confirm');\n  };\n\n  const handleConfirm = (useNewAmount: boolean) => {\n    const finalAmount = useNewAmount ? newAmount : rental.monto;\n    const nextDueDate = calculateNextDueDate(new Date(), rental.periodValue, rental.periodType);\n    \n    const updatedRental: Rental = {\n      ...rental,\n      monto: finalAmount,\n      nextDueDate: nextDueDate.toISOString()\n    };\n\n    onUpdate(updatedRental);\n  };\n\n  const handleOverlayClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return (\n    <div \n      className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4\"\n      onClick={handleOverlayClick}\n    >\n      <div className=\"bg-white p-6 rounded-lg shadow-lg w-full max-w-md\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-bold text-black\">Actualizar Alquiler</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 text-2xl font-bold\"\n            aria-label=\"Cerrar\"\n          >\n            √ó\n          </button>\n        </div>\n\n        <div className=\"mb-4 p-3 bg-gray-50 rounded-lg\">\n          <h3 className=\"font-semibold text-black\">{rental.nombre}</h3>\n          <p className=\"text-gray-600\">Monto actual: {formatCurrency(rental.monto)}</p>\n        </div>\n\n        {step === 'input' && (\n          <>\n            {error && (\n              <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded\">\n                {error}\n              </div>\n            )}\n\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Porcentaje de actualizaci√≥n\n              </label>\n              <div className=\"flex items-center space-x-2\">\n                <input\n                  type=\"number\"\n                  value={percentage}\n                  onChange={(e) => setPercentage(e.target.value)}\n                  className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-black\"\n                  placeholder=\"Ej: 15\"\n                  step=\"0.01\"\n                  min=\"0\"\n                />\n                <span className=\"text-gray-500\">%</span>\n              </div>\n              <p className=\"text-xs text-gray-500 mt-1\">\n                Ejemplo: 15% para inflaci√≥n del per√≠odo\n              </p>\n            </div>\n\n            <div className=\"flex justify-end space-x-3\">\n              <button \n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\"\n              >\n                Cancelar\n              </button>\n              <button \n                onClick={handleCalculate}\n                className=\"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition-colors\"\n              >\n                Calcular\n              </button>\n            </div>\n          </>\n        )}\n\n        {step === 'confirm' && (\n          <>\n            <div className=\"mb-6 space-y-3\">\n              <div className=\"p-3 bg-blue-50 rounded-lg\">\n                <p className=\"text-sm text-gray-600\">Monto actual:</p>\n                <p className=\"text-lg font-semibold text-black\">{formatCurrency(rental.monto)}</p>\n              </div>\n              \n              <div className=\"p-3 bg-green-50 rounded-lg\">\n                <p className=\"text-sm text-gray-600\">Nuevo monto (+{percentage}%):</p>\n                <p className=\"text-lg font-semibold text-green-700\">{formatCurrency(newAmount)}</p>\n              </div>\n            </div>\n\n            <div className=\"mb-6\">\n              <p className=\"text-center text-gray-700 font-medium\">\n                ¬øUsar este nuevo monto como base para la pr√≥xima actualizaci√≥n?\n              </p>\n            </div>\n\n            <div className=\"flex flex-col space-y-2\">\n              <button \n                onClick={() => handleConfirm(true)}\n                className=\"w-full px-4 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors font-medium\"\n              >\n                S√≠, usar nuevo monto ({formatCurrency(newAmount)})\n              </button>\n              <button \n                onClick={() => handleConfirm(false)}\n                className=\"w-full px-4 py-3 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors\"\n              >\n                No, mantener monto actual ({formatCurrency(rental.monto)})\n              </button>\n              <button \n                onClick={() => setStep('input')}\n                className=\"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\"\n              >\n                Volver a calcular\n              </button>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;;;AAJA;;;AAYe,SAAS,kBAAkB,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAA0B;;IAC7F,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IACrD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAuB;IACtD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IAEnD,MAAM,kBAAkB;QACtB,IAAI,CAAC,cAAc,MAAM,OAAO,cAAc;YAC5C,SAAS;YACT;QACF;QAEA,MAAM,gBAAgB,OAAO;QAC7B,IAAI,gBAAgB,GAAG;YACrB,SAAS;YACT;QACF;QAEA,SAAS;QACT,MAAM,mBAAmB,CAAA,GAAA,sHAAA,CAAA,yBAAsB,AAAD,EAAE,OAAO,KAAK,EAAE;QAC9D,aAAa;QACb,QAAQ;IACV;IAEA,MAAM,gBAAgB,CAAC;QACrB,MAAM,cAAc,eAAe,YAAY,OAAO,KAAK;QAC3D,MAAM,cAAc,CAAA,GAAA,sHAAA,CAAA,uBAAoB,AAAD,EAAE,IAAI,QAAQ,OAAO,WAAW,EAAE,OAAO,UAAU;QAE1F,MAAM,gBAAwB;YAC5B,GAAG,MAAM;YACT,OAAO;YACP,aAAa,YAAY,WAAW;QACtC;QAEA,SAAS;IACX;IAEA,MAAM,qBAAqB,CAAC;QAC1B,IAAI,EAAE,MAAM,KAAK,EAAE,aAAa,EAAE;YAChC;QACF;IACF;IAEA,qBACE,6LAAC;QACC,WAAU;QACV,SAAS;kBAET,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAA+B;;;;;;sCAC7C,6LAAC;4BACC,SAAS;4BACT,WAAU;4BACV,cAAW;sCACZ;;;;;;;;;;;;8BAKH,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAA4B,OAAO,MAAM;;;;;;sCACvD,6LAAC;4BAAE,WAAU;;gCAAgB;gCAAe,CAAA,GAAA,sHAAA,CAAA,iBAAc,AAAD,EAAE,OAAO,KAAK;;;;;;;;;;;;;gBAGxE,SAAS,yBACR;;wBACG,uBACC,6LAAC;4BAAI,WAAU;sCACZ;;;;;;sCAIL,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAGhE,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;4CAC7C,WAAU;4CACV,aAAY;4CACZ,MAAK;4CACL,KAAI;;;;;;sDAEN,6LAAC;4CAAK,WAAU;sDAAgB;;;;;;;;;;;;8CAElC,6LAAC;oCAAE,WAAU;8CAA6B;;;;;;;;;;;;sCAK5C,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;;;;;;;;;gBAON,SAAS,2BACR;;sCACE,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAE,WAAU;sDAAwB;;;;;;sDACrC,6LAAC;4CAAE,WAAU;sDAAoC,CAAA,GAAA,sHAAA,CAAA,iBAAc,AAAD,EAAE,OAAO,KAAK;;;;;;;;;;;;8CAG9E,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAE,WAAU;;gDAAwB;gDAAe;gDAAW;;;;;;;sDAC/D,6LAAC;4CAAE,WAAU;sDAAwC,CAAA,GAAA,sHAAA,CAAA,iBAAc,AAAD,EAAE;;;;;;;;;;;;;;;;;;sCAIxE,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAE,WAAU;0CAAwC;;;;;;;;;;;sCAKvD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,SAAS,IAAM,cAAc;oCAC7B,WAAU;;wCACX;wCACwB,CAAA,GAAA,sHAAA,CAAA,iBAAc,AAAD,EAAE;wCAAW;;;;;;;8CAEnD,6LAAC;oCACC,SAAS,IAAM,cAAc;oCAC7B,WAAU;;wCACX;wCAC6B,CAAA,GAAA,sHAAA,CAAA,iBAAc,AAAD,EAAE,OAAO,KAAK;wCAAE;;;;;;;8CAE3D,6LAAC;oCACC,SAAS,IAAM,QAAQ;oCACvB,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;AASf;GA5JwB;KAAA","debugId":null}},
    {"offset": {"line": 860, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/DeleteConfirmationModal.tsx"],"sourcesContent":["'use client';\n\nimport { Rental } from '../app/page';\n\ninterface DeleteConfirmationModalProps {\n  rental: Rental;\n  onClose: () => void;\n  onConfirm: () => void;\n}\n\nexport default function DeleteConfirmationModal({ rental, onClose, onConfirm }: DeleteConfirmationModalProps) {\n  const handleOverlayClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return (\n    <div \n      className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4\"\n      onClick={handleOverlayClick}\n    >\n      <div className=\"bg-white p-6 rounded-lg shadow-lg w-full max-w-md\">\n        <h2 className=\"text-xl font-bold text-black mb-4\">¬øEliminar Alquiler?</h2>\n        \n        <div className=\"mb-6\">\n          <p className=\"text-gray-700 mb-2\">\n            ¬øEst√°s seguro que quer√©s eliminar este alquiler?\n          </p>\n          <div className=\"p-3 bg-gray-50 rounded-lg\">\n            <p className=\"font-semibold text-black\">{rental.nombre}</p>\n            <p className=\"text-sm text-gray-600\">Monto: ${rental.monto.toLocaleString()}</p>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end space-x-3\">\n          <button \n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\"\n          >\n            No\n          </button>\n          <button \n            onClick={() => {\n              onConfirm();\n              onClose();\n            }}\n            className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors\"\n          >\n            S√≠, eliminar\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;AAUe,SAAS,wBAAwB,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAgC;IAC1G,MAAM,qBAAqB,CAAC;QAC1B,IAAI,EAAE,MAAM,KAAK,EAAE,aAAa,EAAE;YAChC;QACF;IACF;IAEA,qBACE,6LAAC;QACC,WAAU;QACV,SAAS;kBAET,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAoC;;;;;;8BAElD,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAE,WAAU;sCAAqB;;;;;;sCAGlC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CAA4B,OAAO,MAAM;;;;;;8CACtD,6LAAC;oCAAE,WAAU;;wCAAwB;wCAAS,OAAO,KAAK,CAAC,cAAc;;;;;;;;;;;;;;;;;;;8BAI7E,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;sCAGD,6LAAC;4BACC,SAAS;gCACP;gCACA;4BACF;4BACA,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;KA7CwB","debugId":null}},
    {"offset": {"line": 985, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/RentalList.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Rental } from '../app/page';\nimport { formatDate, formatCurrency, isOverdue } from '../lib/utils';\nimport { getDaysUntilDue } from '../lib/notifications';\nimport RentalUpdateModal from './RentalUpdateModal';\nimport DeleteConfirmationModal from './DeleteConfirmationModal';\n\ninterface RentalListProps {\n  rentals: Rental[];\n  onUpdateRental: (updatedRental: Rental) => void;\n  onDeleteRental: (id: number) => void;\n}\n\nexport default function RentalList({ rentals, onUpdateRental, onDeleteRental }: RentalListProps) {\n  const [selectedRental, setSelectedRental] = useState<Rental | null>(null);\n  const [rentalToDelete, setRentalToDelete] = useState<Rental | null>(null);\n\n  const handleRentalClick = (rental: Rental) => {\n    if (isOverdue(rental.nextDueDate)) {\n      setSelectedRental(rental);\n    }\n  };\n\n  const handleDeleteClick = (e: React.MouseEvent, rental: Rental) => {\n    e.stopPropagation(); // Prevenir que se abra el modal de actualizaci√≥n\n    setRentalToDelete(rental);\n  };\n\n  if (rentals.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-gray-500 text-lg mb-2\">No hay alquileres registrados</p>\n        <p className=\"text-gray-400 text-sm\">Presiona el bot√≥n \"+\" para agregar tu primer alquiler</p>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"space-y-4\">\n        {rentals.map((rental) => {\n          const overdueStatus = isOverdue(rental.nextDueDate);\n          const daysUntilDue = getDaysUntilDue(rental);\n          \n          let statusColor = 'border-gray-200 bg-white';\n          let statusBadge = null;\n          let statusMessage = null;\n          \n          if (overdueStatus) {\n            statusColor = 'border-red-500 bg-red-50 cursor-pointer hover:bg-red-100 shadow-md';\n            statusBadge = (\n              <span className=\"bg-red-500 text-white text-xs px-2 py-1 rounded-full font-medium\">\n                VENCIDO\n              </span>\n            );\n            statusMessage = (\n              <div className=\"mt-3 pt-2 border-t border-red-200\">\n                <p className=\"text-red-700 text-sm font-medium\">\n                  Toca para actualizar el monto\n                </p>\n              </div>\n            );\n          } else if (daysUntilDue <= 7 && daysUntilDue > 0) {\n            statusColor = 'border-yellow-400 bg-yellow-50';\n            statusBadge = (\n              <span className=\"bg-yellow-500 text-white text-xs px-2 py-1 rounded-full font-medium\">\n                PR√ìXIMO A VENCER\n              </span>\n            );\n          } else if (daysUntilDue === 0) {\n            statusColor = 'border-orange-500 bg-orange-50';\n            statusBadge = (\n              <span className=\"bg-orange-500 text-white text-xs px-2 py-1 rounded-full font-medium\">\n                VENCE HOY\n              </span>\n            );\n          }\n          \n          return (\n            <div\n              key={rental.id}\n              onClick={() => handleRentalClick(rental)}\n              className={`p-4 rounded-lg border-2 transition-all duration-200 ${statusColor} relative`}\n            >\n              {/* Bot√≥n de eliminar - SIEMPRE VISIBLE en esquina inferior derecha */}\n              <button\n                onClick={(e) => handleDeleteClick(e, rental)}\n                className=\"absolute bottom-2 right-2 w-10 h-10 bg-red-500 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-red-600 transition-colors\"\n                aria-label=\"Eliminar alquiler\"\n              >\n                üóëÔ∏è\n              </button>\n\n              <div className=\"flex justify-between items-start mb-2\">\n                <h3 className=\"text-lg font-semibold text-black\">\n                  {rental.nombre}\n                </h3>\n                {statusBadge}\n              </div>\n              \n              <div className=\"space-y-1 text-sm\">\n                <p className=\"text-gray-700\">\n                  <span className=\"font-medium\">Monto:</span> {formatCurrency(rental.monto)}\n                </p>\n                \n                <p className=\"text-gray-700\">\n                  <span className=\"font-medium\">Pr√≥ximo vencimiento:</span> {formatDate(rental.nextDueDate)}\n                  {daysUntilDue > 0 && (\n                    <span className=\"text-gray-500 ml-2\">\n                      ({daysUntilDue} {daysUntilDue === 1 ? 'd√≠a' : 'd√≠as'})\n                    </span>\n                  )}\n                </p>\n                \n                <p className=\"text-gray-700\">\n                  <span className=\"font-medium\">Periodicidad:</span> cada {rental.periodValue} {rental.periodType}\n                </p>\n                \n                {rental.detalles && (\n                  <p className=\"text-gray-600 mt-2\">\n                    <span className=\"font-medium\">Detalles:</span> {rental.detalles}\n                  </p>\n                )}\n              </div>\n              \n              {statusMessage}\n            </div>\n          );\n        })}\n      </div>\n\n      {selectedRental && (\n        <RentalUpdateModal\n          rental={selectedRental}\n          onClose={() => setSelectedRental(null)}\n          onUpdate={(updatedRental) => {\n            onUpdateRental(updatedRental);\n            setSelectedRental(null);\n          }}\n        />\n      )}\n\n      {rentalToDelete && (\n        <DeleteConfirmationModal\n          rental={rentalToDelete}\n          onClose={() => setRentalToDelete(null)}\n          onConfirm={() => {\n            onDeleteRental(rentalToDelete.id);\n            setRentalToDelete(null);\n          }}\n        />\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1284, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/NotificationStatus.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { requestNotificationPermission, checkNotificationPermission } from '../lib/notifications';\n\nexport default function NotificationStatus() {\n  const [permission, setPermission] = useState<string>('default');\n  const [isRequesting, setIsRequesting] = useState(false);\n\n  useEffect(() => {\n    setPermission(checkNotificationPermission());\n  }, []);\n\n  const handleRequestPermission = async () => {\n    setIsRequesting(true);\n    const granted = await requestNotificationPermission();\n    setPermission(checkNotificationPermission());\n    setIsRequesting(false);\n  };\n\n  if (permission === 'not-supported') {\n    return (\n      <div className=\"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\n        <p className=\"text-yellow-800 text-sm\">\n          ‚ö†Ô∏è Este navegador no soporta notificaciones. Usa Safari en iOS para recibir recordatorios.\n        </p>\n      </div>\n    );\n  }\n\n  if (permission === 'denied') {\n    return (\n      <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n        <p className=\"text-red-800 text-sm mb-2\">\n          üö´ Las notificaciones est√°n bloqueadas\n        </p>\n        <p className=\"text-red-600 text-xs\">\n          Ve a Configuraci√≥n ‚Üí Safari ‚Üí Notificaciones para habilitarlas\n        </p>\n      </div>\n    );\n  }\n\n  if (permission === 'granted') {\n    return (\n      <div className=\"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg\">\n        <p className=\"text-green-800 text-sm\">\n          ‚úÖ Notificaciones activadas - Recibir√°s recordatorios de vencimientos\n        </p>\n      </div>\n    );\n  }\n\n  // permission === 'default'\n  return (\n    <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n      <p className=\"text-blue-800 text-sm mb-3\">\n        üîî Activa las notificaciones para recibir recordatorios cuando venzan tus alquileres\n      </p>\n      <button\n        onClick={handleRequestPermission}\n        disabled={isRequesting}\n        className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50\"\n      >\n        {isRequesting ? 'Solicitando permisos...' : 'Activar Notificaciones'}\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IACrD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;wCAAE;YACR,cAAc,CAAA,GAAA,8HAAA,CAAA,8BAA2B,AAAD;QAC1C;uCAAG,EAAE;IAEL,MAAM,0BAA0B;QAC9B,gBAAgB;QAChB,MAAM,UAAU,MAAM,CAAA,GAAA,8HAAA,CAAA,gCAA6B,AAAD;QAClD,cAAc,CAAA,GAAA,8HAAA,CAAA,8BAA2B,AAAD;QACxC,gBAAgB;IAClB;IAEA,IAAI,eAAe,iBAAiB;QAClC,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAE,WAAU;0BAA0B;;;;;;;;;;;IAK7C;IAEA,IAAI,eAAe,UAAU;QAC3B,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAE,WAAU;8BAA4B;;;;;;8BAGzC,6LAAC;oBAAE,WAAU;8BAAuB;;;;;;;;;;;;IAK1C;IAEA,IAAI,eAAe,WAAW;QAC5B,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAE,WAAU;0BAAyB;;;;;;;;;;;IAK5C;IAEA,2BAA2B;IAC3B,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAE,WAAU;0BAA6B;;;;;;0BAG1C,6LAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAU;0BAET,eAAe,4BAA4B;;;;;;;;;;;;AAIpD;GA/DwB;KAAA","debugId":null}},
    {"offset": {"line": 1413, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/lib/storage.ts"],"sourcesContent":["import { Rental } from '../app/page';\n\nconst STORAGE_KEY = 'alquileres_data';\n\nexport function getRentals(): Rental[] {\n  try {\n    if (typeof window === 'undefined') return [];\n    \n    const data = localStorage.getItem(STORAGE_KEY);\n    return data ? JSON.parse(data) : [];\n  } catch (error) {\n    console.error('Error reading from localStorage:', error);\n    return [];\n  }\n}\n\nexport function addRental(rental: Omit<Rental, 'id' | 'createdAt'>): Rental {\n  try {\n    const rentals = getRentals();\n    const newRental: Rental = {\n      ...rental,\n      id: Date.now(),\n      createdAt: new Date().toISOString(),\n    };\n    \n    rentals.push(newRental);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(rentals));\n    \n    return newRental;\n  } catch (error) {\n    console.error('Error saving rental:', error);\n    throw error;\n  }\n}\n\nexport function updateRental(updatedRental: Rental): void {\n  try {\n    const rentals = getRentals();\n    const index = rentals.findIndex(r => r.id === updatedRental.id);\n    \n    if (index !== -1) {\n      rentals[index] = updatedRental;\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(rentals));\n    }\n  } catch (error) {\n    console.error('Error updating rental:', error);\n    throw error;\n  }\n}\n\nexport function deleteRental(id: number): void {\n  try {\n    const rentals = getRentals();\n    const filteredRentals = rentals.filter(r => r.id !== id);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(filteredRentals));\n  } catch (error) {\n    console.error('Error deleting rental:', error);\n    throw error;\n  }\n}\n"],"names":[],"mappings":";;;;;;AAEA,MAAM,cAAc;AAEb,SAAS;IACd,IAAI;QACF,uCAAmC;;QAAS;QAE5C,MAAM,OAAO,aAAa,OAAO,CAAC;QAClC,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ,EAAE;IACrC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO,EAAE;IACX;AACF;AAEO,SAAS,UAAU,MAAwC;IAChE,IAAI;QACF,MAAM,UAAU;QAChB,MAAM,YAAoB;YACxB,GAAG,MAAM;YACT,IAAI,KAAK,GAAG;YACZ,WAAW,IAAI,OAAO,WAAW;QACnC;QAEA,QAAQ,IAAI,CAAC;QACb,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;QAEjD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,MAAM;IACR;AACF;AAEO,SAAS,aAAa,aAAqB;IAChD,IAAI;QACF,MAAM,UAAU;QAChB,MAAM,QAAQ,QAAQ,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,cAAc,EAAE;QAE9D,IAAI,UAAU,CAAC,GAAG;YAChB,OAAO,CAAC,MAAM,GAAG;YACjB,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;QACnD;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,MAAM;IACR;AACF;AAEO,SAAS,aAAa,EAAU;IACrC,IAAI;QACF,MAAM,UAAU;QAChB,MAAM,kBAAkB,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACrD,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;IACnD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 1480, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/lib/notification-system.ts"],"sourcesContent":["import { Rental } from '../app/page';\n\n// Sistema de notificaciones para iOS Safari\nclass NotificationSystem {\n  private static instance: NotificationSystem;\n  private alarms: Map<number, NodeJS.Timeout> = new Map();\n  private lastCheckTime: number = 0;\n\n  static getInstance(): NotificationSystem {\n    if (!NotificationSystem.instance) {\n      NotificationSystem.instance = new NotificationSystem();\n    }\n    return NotificationSystem.instance;\n  }\n\n  async requestPermission(): Promise<boolean> {\n    if (!('Notification' in window)) {\n      alert('‚ö†Ô∏è Safari en iOS tiene limitaciones con notificaciones push.\\n\\nPara recordatorios efectivos:\\n1. Mant√©n la app abierta en segundo plano\\n2. Revisa la app diariamente\\n3. Los alquileres vencidos aparecer√°n en rojo');\n      return false;\n    }\n\n    if (Notification.permission === 'granted') {\n      return true;\n    }\n\n    const permission = await Notification.requestPermission();\n    return permission === 'granted';\n  }\n\n  scheduleNotification(rental: Rental): void {\n    this.clearAlarm(rental.id);\n    \n    const dueDate = new Date(rental.nextDueDate);\n    const now = new Date();\n    const timeUntilDue = dueDate.getTime() - now.getTime();\n\n    // Si ya venci√≥, notificar inmediatamente\n    if (timeUntilDue <= 0) {\n      this.showNotification(rental);\n      return;\n    }\n\n    // Programar notificaci√≥n para el d√≠a exacto\n    const alarm = setTimeout(() => {\n      this.showNotification(rental);\n    }, timeUntilDue);\n\n    this.alarms.set(rental.id, alarm);\n  }\n\n  showNotification(rental: Rental): void {\n    const message = `Alquiler \"${rental.nombre}\" por ${formatCurrency(rental.monto)} ha vencido. Actualiza el monto.`;\n    \n    // Intentar notificaci√≥n push\n    if (Notification.permission === 'granted') {\n      new Notification('Alquiler Vencido', {\n        body: message,\n        icon: '/icon-192.png',\n        tag: `rental-${rental.id}`,\n        requireInteraction: true\n      });\n    }\n\n    // Siempre mostrar notificaci√≥n visual en la app\n    this.showVisualNotification(rental);\n    \n    // Tambi√©n mostrar alerta si la app est√° abierta\n    alert(`üö® Alquiler Vencido\\n\\n\"${rental.nombre}\" por ${formatCurrency(rental.monto)} ha vencido.\\n\\nPor favor actualiza el monto.`);\n  }\n\n  private showVisualNotification(rental: Rental): void {\n    // Crear notificaci√≥n visual persistente\n    const notification = document.createElement('div');\n    notification.className = 'fixed top-4 right-4 bg-red-600 text-white p-4 rounded-lg shadow-lg z-50 max-w-sm';\n    notification.innerHTML = `\n      <div class=\"flex items-start\">\n        <div class=\"flex-1\">\n          <h4 class=\"font-bold text-sm\">Alquiler Vencido</h4>\n          <p class=\"text-xs mt-1\">\"${rental.nombre}\" por ${formatCurrency(rental.monto)} ha vencido</p>\n        </div>\n        <button onclick=\"this.parentElement.parentElement.remove()\" class=\"ml-2 text-white hover:text-gray-200\">\n          ‚úï\n        </button>\n      </div>\n    `;\n    \n    document.body.appendChild(notification);\n    \n    // Auto-remover despu√©s de 10 segundos\n    setTimeout(() => {\n      if (notification.parentElement) {\n        notification.remove();\n      }\n    }, 10000);\n  }\n\n  checkAllRentals(rentals: Rental[]): void {\n    const now = new Date();\n    \n    // Evitar verificaciones muy frecuentes\n    if (now.getTime() - this.lastCheckTime < 60000) { // 1 minuto\n      return;\n    }\n    \n    this.lastCheckTime = now.getTime();\n    \n    rentals.forEach(rental => {\n      const dueDate = new Date(rental.nextDueDate);\n      const today = new Date();\n      \n      today.setHours(0, 0, 0, 0);\n      dueDate.setHours(0, 0, 0, 0);\n      \n      if (dueDate.getTime() === today.getTime()) {\n        this.showNotification(rental);\n      }\n    });\n  }\n\n  clearAlarm(rentalId: number): void {\n    const alarm = this.alarms.get(rentalId);\n    if (alarm) {\n      clearTimeout(alarm);\n      this.alarms.delete(rentalId);\n    }\n  }\n\n  clearAllAlarms(): void {\n    this.alarms.forEach(alarm => clearTimeout(alarm));\n    this.alarms.clear();\n  }\n}\n\n// Funci√≥n auxiliar para formatear moneda\nfunction formatCurrency(amount: number): string {\n  return new Intl.NumberFormat('es-AR', {\n    style: 'currency',\n    currency: 'ARS',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0\n  }).format(amount);\n}\n\nexport const notificationSystem = NotificationSystem.getInstance();\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1608, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/NotificationTester.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Rental } from '../app/page';\nimport { notificationSystem } from '../lib/notification-system';\n\ninterface NotificationTesterProps {\n  rentals: Rental[];\n}\n\nexport default function NotificationTester({ rentals }: NotificationTesterProps) {\n  const [testMessage, setTestMessage] = useState('');\n\n  const testNotification = () => {\n    const testRental: Rental = {\n      id: 999,\n      nombre: 'Prueba de Notificaci√≥n',\n      monto: 50000,\n      detalles: 'Esta es una notificaci√≥n de prueba',\n      periodValue: 1,\n      periodType: 'd√≠as',\n      nextDueDate: new Date().toISOString(),\n      createdAt: new Date().toISOString()\n    };\n\n    notificationSystem.showNotification(testRental);\n    setTestMessage('‚úÖ Notificaci√≥n de prueba enviada. Si no ves nada, verifica los permisos en Configuraci√≥n > Safari > Notificaciones');\n  };\n\n  const forceCheckOverdue = () => {\n    notificationSystem.checkAllRentals(rentals);\n    setTestMessage('üîç Verificando alquileres vencidos...');\n  };\n\n  return (\n    <div className=\"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n      <h3 className=\"font-bold text-blue-800 mb-2\">üîî Prueba de Notificaciones</h3>\n      \n      <div className=\"space-y-2\">\n        <button\n          onClick={testNotification}\n          className=\"w-full px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700\"\n        >\n          Probar Notificaci√≥n Ahora\n        </button>\n        \n        <button\n          onClick={forceCheckOverdue}\n          className=\"w-full px-3 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700\"\n        >\n          Verificar Alquileres Vencidos\n        </button>\n        \n        {testMessage && (\n          <p className=\"text-xs text-blue-700 mt-2\">{testMessage}</p>\n        )}\n      </div>\n      \n      <div className=\"mt-3 text-xs text-gray-600\">\n        <p><strong>Para iOS:</strong></p>\n        <ul className=\"list-disc list-inside ml-2\">\n          <li>Aseg√∫rate de usar Safari</li>\n          <li>Ve a Configuraci√≥n {'>'} Safari {'>'} Notificaciones</li>\n          <li>Habilita notificaciones para este sitio</li>\n          <li>Mant√©n la app abierta o en segundo plano</li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;;;AAJA;;;AAUe,SAAS,mBAAmB,EAAE,OAAO,EAA2B;;IAC7E,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,MAAM,mBAAmB;QACvB,MAAM,aAAqB;YACzB,IAAI;YACJ,QAAQ;YACR,OAAO;YACP,UAAU;YACV,aAAa;YACb,YAAY;YACZ,aAAa,IAAI,OAAO,WAAW;YACnC,WAAW,IAAI,OAAO,WAAW;QACnC;QAEA,uIAAA,CAAA,qBAAkB,CAAC,gBAAgB,CAAC;QACpC,eAAe;IACjB;IAEA,MAAM,oBAAoB;QACxB,uIAAA,CAAA,qBAAkB,CAAC,eAAe,CAAC;QACnC,eAAe;IACjB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA+B;;;;;;0BAE7C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;kCAID,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;oBAIA,6BACC,6LAAC;wBAAE,WAAU;kCAA8B;;;;;;;;;;;;0BAI/C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCAAE,cAAA,6LAAC;sCAAO;;;;;;;;;;;kCACX,6LAAC;wBAAG,WAAU;;0CACZ,6LAAC;0CAAG;;;;;;0CACJ,6LAAC;;oCAAG;oCAAoB;oCAAI;oCAAS;oCAAI;;;;;;;0CACzC,6LAAC;0CAAG;;;;;;0CACJ,6LAAC;0CAAG;;;;;;;;;;;;;;;;;;;;;;;;AAKd;GA3DwB;KAAA","debugId":null}},
    {"offset": {"line": 1771, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport RentalForm from '../components/RentalForm';\nimport RentalList from '../components/RentalList';\nimport NotificationStatus from '../components/NotificationStatus';\nimport { getRentals, addRental as storageAddRental, updateRental as storageUpdateRental, deleteRental as storageDeleteRental } from '../lib/storage';\nimport { requestNotificationPermission } from '../lib/notifications';\nimport { notificationSystem } from '../lib/notification-system';\nimport NotificationTester from '../components/NotificationTester';\n\nexport interface Rental {\n  id: number;\n  nombre: string;\n  monto: number;\n  detalles: string;\n  periodValue: number;\n  periodType: 'd√≠as' | 'meses';\n  nextDueDate: string;\n  createdAt: string;\n}\n\nexport default function Page() {\n  const [rentals, setRentals] = useState<Rental[]>([]);\n  const [showForm, setShowForm] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Load rentals from localStorage on initial render\n  useEffect(() => {\n    try {\n      const storedRentals = getRentals();\n      setRentals(storedRentals);\n    } catch (error) {\n      console.error('Error loading rentals:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Register service worker\n  useEffect(() => {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.register('/sw.js')\n        .then(() => console.log('Service Worker registered'))\n        .catch((err) => console.error('SW registration error: ', err));\n    }\n  }, []);\n\n  // Check for overdue rentals and notify\n  useEffect(() => {\n    if (rentals.length > 0) {\n      notificationSystem.checkAllRentals(rentals);\n    }\n  }, [rentals]);\n\n  // Set up periodic check for overdue rentals (every minute)\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (rentals.length > 0) {\n        notificationSystem.checkAllRentals(rentals);\n      }\n    }, 60 * 1000); // Check every minute for testing\n\n    return () => clearInterval(interval);\n  }, [rentals]);\n\n  const addRental = (rental: Omit<Rental, 'id' | 'createdAt'>) => {\n    try {\n      const newRental = storageAddRental(rental);\n      setRentals(getRentals());\n      \n      // Schedule notification for this rental\n      notificationSystem.scheduleNotification(newRental);\n    } catch (error) {\n      console.error('Error adding rental:', error);\n    }\n  };\n\n  const updateRental = (updatedRental: Rental) => {\n    try {\n      storageUpdateRental(updatedRental);\n      setRentals(getRentals());\n      \n      // Schedule notification for updated rental\n      notificationSystem.scheduleNotification(updatedRental);\n    } catch (error) {\n      console.error('Error updating rental:', error);\n    }\n  };\n\n  const deleteRental = (id: number) => {\n    try {\n      storageDeleteRental(id);\n      setRentals(getRentals());\n      // Cancelar notificaciones para este alquiler\n      notificationSystem.clearAlarm(id);\n    } catch (error) {\n      console.error('Error deleting rental:', error);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <main className=\"min-h-screen bg-background text-foreground p-4 flex items-center justify-center\">\n        <p>Cargando...</p>\n      </main>\n    );\n  }\n\n  return (\n    <main className=\"min-h-screen bg-background text-foreground p-4\">\n      <header className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Alquileres</h1>\n        <button\n          onClick={() => setShowForm(true)}\n          className=\"w-12 h-12 bg-black text-white rounded-full text-2xl font-bold hover:bg-gray-800 transition-colors\"\n          aria-label=\"Agregar nuevo alquiler\"\n        >\n          +\n        </button>\n      </header>\n      \n      <NotificationStatus />\n      \n      {process.env.NODE_ENV === 'development' && (\n        <NotificationTester rentals={rentals} />\n      )}\n      \n      <RentalList rentals={rentals} onUpdateRental={updateRental} onDeleteRental={deleteRental} />\n\n      {showForm && (\n        <RentalForm\n          onClose={() => setShowForm(false)}\n          onSave={(rental) => { \n            addRental(rental); \n            setShowForm(false); \n          }}\n        />\n      )}\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}